{% extends 'base.html' %}

{% block title %}Dados de Checklist Populados - HelpOP{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col-12">
            <div class="text-center">
                <h1 class="display-4 text-warning mb-3">
                    <i class="fas fa-clipboard-list me-3"></i>
                    Dados de Checklist Automotivo
                </h1>
                <p class="lead text-muted">Sistema HelpOP - Base de dados populada com sucesso</p>
            </div>
        </div>
    </div>
    
    <!-- Estat√≠sticas -->
    <div class="row mb-5">
        <div class="col-md-6">
            <div class="card" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white;">
                <div class="card-body text-center">
                    <i class="fas fa-folder-open fa-3x mb-3"></i>
                    <h3 class="card-title">{{ total_categorias }}</h3>
                    <p class="card-text">Categorias de Checklist</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white;">
                <div class="card-body text-center">
                    <i class="fas fa-tasks fa-3x mb-3"></i>
                    <h3 class="card-title">{{ total_itens }}</h3>
                    <p class="card-text">Itens de Verifica√ß√£o</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Categorias e Itens -->
    {% for categoria_data in categorias_data %}
    <div class="card mb-4" style="border-left: 4px solid #ffc107; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div class="card-header" style="background: linear-gradient(135deg, #ffc107 0%, #ffb300 100%); color: #000; font-weight: bold;">
            <div class="row align-items-center">
                <div class="col">
                    <h4 class="mb-0">
                        <i class="fas fa-cog me-2"></i>
                        {{ categoria_data.categoria.ordem }}. {{ categoria_data.categoria.nome }}
                    </h4>
                    <small class="text-dark">{{ categoria_data.categoria.descricao }}</small>
                </div>
                <div class="col-auto">
                    <span class="badge bg-dark">{{ categoria_data.total_itens }} itens</span>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div style="max-height: 400px; overflow-y: auto;">
                <div class="row">
                    {% for item in categoria_data.itens %}
                    <div class="col-md-6 mb-2">
                        <div class="d-flex align-items-center">
                            <span class="badge me-2" style="background-color: #e9ecef; color: #495057; font-size: 0.85rem;">{{ item.ordem }}</span>
                            <span class="flex-grow-1">{{ item.nome }}</span>
                            {% if item.critico %}
                            <i class="fas fa-exclamation-triangle text-danger ms-2" title="Item Cr√≠tico"></i>
                            {% endif %}
                            {% if item.obrigatorio %}
                            <i class="fas fa-star text-warning ms-1" title="Item Obrigat√≥rio"></i>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    
    <div class="text-center mt-5">
        <div class="alert alert-success">
            <i class="fas fa-check-circle me-2"></i>
            <strong>Base de dados populada com sucesso!</strong> 
            Foram criadas {{ total_categorias }} categorias com {{ total_itens }} itens de verifica√ß√£o automotiva.
        </div>
        
        <div class="mt-3">
            <a href="/admin/core/categoriachecklist/" class="btn btn-warning me-2" target="_blank">
                <i class="fas fa-cog me-2"></i>Gerenciar Categorias
            </a>
            <a href="/admin/core/itemchecklist/" class="btn btn-info me-2" target="_blank">
                <i class="fas fa-list me-2"></i>Gerenciar Itens
            </a>
            <a href="{% url 'checklist_lista' %}" class="btn btn-primary">
                <i class="fas fa-clipboard-check me-2"></i>Ver Checklists
            </a>
        </div>
        
        <div class="mt-4">
            <h5 class="text-warning">üìã Pr√≥ximos Passos:</h5>
            <div class="row mt-3">
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-plus-circle fa-2x text-primary mb-3"></i>
                            <h6>1. Criar Tipos de Ve√≠culo</h6>
                            <p class="small text-muted">Defina os tipos de ve√≠culos (Carro, Moto, Caminh√£o, etc.)</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-clipboard fa-2x text-success mb-3"></i>
                            <h6>2. Criar Checklists</h6>
                            <p class="small text-muted">Monte checklists personalizados usando os itens criados</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-play-circle fa-2x text-warning mb-3"></i>
                            <h6>3. Executar Verifica√ß√µes</h6>
                            <p class="small text-muted">Use os checklists para verificar ve√≠culos na oficina</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.category-card { 
    border-left: 4px solid #ffc107; 
    margin-bottom: 2rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.category-header {
    background: linear-gradient(135deg, #ffc107 0%, #ffb300 100%);
    color: #000;
    font-weight: bold;
}
.item-list {
    max-height: 400px;
    overflow-y: auto;
}
.item-badge {
    background-color: #e9ecef;
    color: #495057;
    font-size: 0.85rem;
}
.stats-card {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
}
</style>
{% endblock %}